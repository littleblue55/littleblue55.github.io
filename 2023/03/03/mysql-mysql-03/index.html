<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 操作数据库 · Littleblue</title><meta name="description" content="操作数据库 - Littleblue"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://example.com/atom.xml" title="Littleblue"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Littleblue" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">操作数据库</h1><div class="post-info">Mar 3, 2023</div><div class="post-content"><p>操作数据库 &gt; 操作数据中的表 &gt; 操作数据库中表的数据</p>
<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> study;</span><br><span class="line"><span class="comment">--或者</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE study;</span><br></pre></td></tr></table></figure>

<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> teachers;</span><br><span class="line"><span class="comment">--或者</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE teachers;</span><br></pre></td></tr></table></figure>

<h3 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h3><p>如果表名或者字段名是一个特殊字符，就要带``</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE study;</span><br><span class="line">USE `study`;</span><br></pre></td></tr></table></figure>

<h3 id="查看所有数据库"><a href="#查看所有数据库" class="headerlink" title="查看所有数据库"></a>查看所有数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br></pre></td></tr></table></figure>

<h3 id="创建数据库表"><a href="#创建数据库表" class="headerlink" title="创建数据库表"></a>创建数据库表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个school数据库</span></span><br><span class="line"><span class="comment">-- 创建学生表（列，字段），使用SQL创建</span></span><br><span class="line"><span class="comment">-- 学号int 密码varchar(20) 姓名，性别varchar(2)，出生日期（datetime），家庭住址，email</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注意点：使用英文符号，表的名字和字段尽量用``</span></span><br><span class="line"><span class="comment">-- 字符串用单引号</span></span><br><span class="line"><span class="comment">-- 所有的语句后面加上英文的,  最后一个不用</span></span><br><span class="line"><span class="comment">-- PRIMARY KEY 主键</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `students`(</span><br><span class="line">	`id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">	`pwd` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;123456&#x27;</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">	`sex` <span class="type">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;男&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">	`birth` <span class="type">DATE</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">	`address` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;家庭住址&#x27;</span>,</span><br><span class="line">	`email` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY(`id`)</span><br><span class="line">	</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>

<p>常用命令</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE school <span class="comment">-- 查看创建数据库的语句</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> students <span class="comment">-- 查看students表的定义语句</span></span><br><span class="line"><span class="keyword">DESC</span> students   <span class="comment">-- 显示表的结构</span></span><br></pre></td></tr></table></figure>

<h4 id="数据库引擎"><a href="#数据库引擎" class="headerlink" title="数据库引擎"></a>数据库引擎</h4><blockquote>
<p>INNODB</p>
</blockquote>
<p>navicat：设计表&gt;&gt;选项&gt;&gt;引擎</p>
<p>INNODB：mysql默认使用的，</p>
<p>MYISAM：早些年使用的，</p>
<table>
<thead>
<tr>
<th></th>
<th>MYISAM</th>
<th>INNODB</th>
</tr>
</thead>
<tbody><tr>
<td>事务支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>外键外束</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>表空间的大小</td>
<td>较小</td>
<td>较大，约为2倍</td>
</tr>
</tbody></table>
<p>常规使用操作：</p>
<ul>
<li>MYISAM，节约空间，速度较快</li>
<li>INNODB，安全性高，事物的处理，多表多用户操作</li>
</ul>
<p><img src="D:\work\blog\source_posts\mysql\mysql-03\image-20230306145204445.png" alt="image-20230306145204445"></p>
<h4 id="字符集编码"><a href="#字符集编码" class="headerlink" title="字符集编码"></a>字符集编码</h4><blockquote>
<p><strong>utf8mb3和utf8mb4</strong></p>
</blockquote>
<p>在mysql中，utf8默认指的是utf8mb3，即使用1-3个字节表示一个字符；正常来说utf8也就是最大使用3个字节的utf8mb3已经够用了，但是为了存储4个字节场景下的字符如emoji表情，就需要用到4个字节编码的utf8，也就是utf8mb4。其中mb4的含义为：most bytes 4，也就是最大4字节。</p>
<h3 id="修改删除表"><a href="#修改删除表" class="headerlink" title="修改删除表"></a>修改删除表</h3><blockquote>
<p>修改</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改表名：ALTER TABLE 旧表名 RENAME AS 新表名;</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> teachers RENAME <span class="keyword">AS</span> teachers1;</span><br><span class="line"><span class="comment">-- 增加表的字段：ALTER TABLE 表名 ADD 字段名 列属性;</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> teachers1 <span class="keyword">ADD</span> age <span class="type">INT</span> ( <span class="number">3</span> );</span><br><span class="line"><span class="comment">-- 修改表的字段 （重命名，修改约束）</span></span><br><span class="line"><span class="comment">-- 修改约束：ALTER TABLE 表名 MODIFY 字段名 列属性[]; </span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> teachers1 MODIFY age <span class="type">VARCHAR</span>(<span class="number">3</span>); <span class="comment">-- 修改约束，无法重命名</span></span><br><span class="line"><span class="comment">-- 重命名，：ALTER TABLE 表名 CHANGE 旧字段名 新字段名 列属性[]; </span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> teachers1 CHANGE age age1 <span class="type">int</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p><strong>注意：CHANGE 不加类型会报错</strong></p>
<p><img src="D:\work\blog\source_posts\mysql\mysql-03\98da6282e0919b941d00ed319901f9a.png" alt="98da6282e0919b941d00ed319901f9a"></p>
<p><img src="D:\work\blog\source_posts\mysql\mysql-03\c83dd064d3d223623a4b80caf5feac3.png" alt="c83dd064d3d223623a4b80caf5feac3"></p>
<blockquote>
<p>删除</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除表的字段：ALTER TABLE 表名 DROP 字段名;</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> teachers1 <span class="keyword">DROP</span> age1;</span><br><span class="line"><span class="comment">-- 删除表：如果表存在就删除：DROP TABLE IF EXISTS 表名;</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> teachers1;</span><br></pre></td></tr></table></figure>

<p><strong>所有的创建的删除尽量加上判断，以免报错</strong></p>
<blockquote>
<p>注意点</p>
</blockquote>
<ul>
<li>`` 字段名用反单引号包裹</li>
<li>注释  <hr>
<ul>
<li>/**/</li>
</ul>
</li>
<li>sql关键字对大小写不敏感，建议大家写小写，方便看。</li>
<li>所有的符号都是英文符号</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2023/03/06/mysql-mysql-04/" class="prev">PREV</a><a href="/2023/03/03/mysql-mysql-02/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2023 <a href="http://example.com">Littleblue</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>